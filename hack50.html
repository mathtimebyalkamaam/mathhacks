<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quadrilaterals Properties Hack - Math Time</title>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-C5EKPVZHVZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-C5EKPVZHVZ');
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Poppins:wght@500;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body {
            background-color: #1a1a1a;
            font-family: 'Poppins', sans-serif;
            margin: 0;
            padding: 0;
        }
        .phone-screen {
            background-color: #0d1b2a;
            width: 100%;
            max-width: 400px;
            aspect-ratio: 9 / 16;
            border-radius: 30px;
            box-shadow: 0 0 40px rgba(255, 255, 255, 0.2);
            overflow: hidden;
            position: relative;
            will-change: transform;
        }
        /* VIRAL OPTIMIZATION: Larger, bolder text for mobile viewing */
        .text-overlay {
            position: absolute;
            top: 12%;
            left: 5%;
            right: 5%;
            text-align: center;
            font-size: clamp(1.6rem, 7vw, 2.4rem);
            font-weight: 700;
            color: #e0e1dd;
            opacity: 0;
            transform: scale(0.9) translateY(30px);
            transition: opacity 0.3s ease, transform 0.3s ease;
            z-index: 10;
            line-height: 1.3;
        }
        .text-overlay.visible {
            opacity: 1;
            transform: scale(1) translateY(0);
        }
        .text-overlay .handwritten {
            font-family: 'Caveat', cursive;
            color: #ffca3a;
            font-size: 1.4em;
            line-height: 1.1;
            display: block;
        }
        .text-overlay .highlight {
            color: #80ed99;
            font-weight: 900;
        }
        .text-overlay .formula {
            color: #fca311;
            font-size: 1.15em;
        }
        /* VIRAL OPTIMIZATION: Persistent captions for accessibility */
        .caption-box {
            position: absolute;
            bottom: 15%;
            left: 5%;
            right: 5%;
            background: rgba(0, 0, 0, 0.85);
            padding: 12px 16px;
            border-radius: 12px;
            font-size: clamp(1rem, 4.5vw, 1.3rem);
            color: white;
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.3s ease;
            z-index: 5;
            font-weight: 600;
            line-height: 1.4;
        }
        .caption-box.visible {
            opacity: 1;
            transform: translateY(0);
        }
        /* VIRAL OPTIMIZATION: Eye-catching hook overlay */
        .hook-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #ff006e 0%, #8338ec 100%);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            opacity: 1;
            transition: opacity 0.4s ease;
        }
        .hook-overlay.hidden {
            opacity: 0;
            pointer-events: none;
        }
        .hook-text {
            font-size: clamp(2rem, 8vw, 3.2rem);
            font-weight: 900;
            color: white;
            text-align: center;
            padding: 0 20px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            animation: pulse 0.6s ease-in-out infinite alternate;
        }
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.05); }
        }
        /* VIRAL OPTIMIZATION: Simplified CTAs */
        .cta-overlay {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(1.1rem, 5vw, 1.5rem);
            padding: 12px 28px;
            border-radius: 50px;
            font-weight: 700;
            text-align: center;
            opacity: 0;
            transition: all 0.4s ease;
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            z-index: 15;
        }
        .cta-overlay.visible {
            opacity: 1;
        }
        .cta-follow {
            bottom: 22%;
            background: linear-gradient(135deg, #FF0000 0%, #CC0000 100%);
            color: white;
        }
        .cta-save {
            bottom: 12%;
            background: linear-gradient(135deg, #ffca3a 0%, #ff9500 100%);
            color: #0d1b2a;
        }
        .replay-button {
            position: absolute;
            bottom: 5%;
            left: 50%;
            transform: translateX(-50%) scale(0.8);
            font-size: 1.1rem;
            padding: 10px 24px;
            border-radius: 50px;
            border: none;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            visibility: hidden;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            background-color: #61a5c2;
            color: white;
            z-index: 20;
        }
        .replay-button.visible {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) scale(1);
        }
        .phone-screen a.home-link {
            opacity: 0.7;
            transition: all 0.3s ease;
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 25;
        }
        .phone-screen a.home-link:hover {
            opacity: 1;
            transform: scale(1.05);
        }
        /* VIRAL OPTIMIZATION: Branding appears mid-video */
        .branding {
            position: absolute;
            top: 8%;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 8;
        }
        .branding.visible {
            opacity: 1;
        }
        .branding-logo {
            font-family: 'Caveat', cursive;
            font-size: clamp(1.8rem, 7vw, 2.5rem);
            color: #ffca3a;
            font-weight: 700;
            margin: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        .branding-subtitle {
            font-size: clamp(0.9rem, 4vw, 1.2rem);
            color: #e0e1dd;
            margin: 0;
            opacity: 0.95;
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

    <div class="phone-screen">
        <!-- VIRAL HOOK: 3-second explosive opening -->
        <div id="hookOverlay" class="hook-overlay">
            <div class="hook-text">This SIMPLE trick will<br>change EVERYTHING! ðŸ¤¯</div>
        </div>

        <!-- Main canvas for shape animations -->
        <canvas id="animationCanvas"></canvas>

        <!-- VIRAL OPTIMIZATION: Branding appears at 20s mark -->
        <div id="branding" class="branding">
            <p class="branding-logo">Math Time</p>
            <p class="branding-subtitle">by Alka Ma'am</p>
        </div>

        <!-- Main text overlay for key messages -->
        <div id="textOverlay" class="text-overlay"></div>

        <!-- VIRAL OPTIMIZATION: Persistent captions for accessibility -->
        <div id="captionBox" class="caption-box"></div>

        <!-- VIRAL OPTIMIZATION: Strategic CTAs -->
        <div id="ctaFollow" class="cta-overlay cta-follow">Follow for more math shortcuts âœ¨</div>
        <div id="ctaSave" class="cta-overlay cta-save">Save this for your exam! ðŸ“Œ</div>

        <button id="replayBtn" class="replay-button">â†» Watch Again</button>
        
        <a href="index.html" class="home-link bg-indigo-600/50 hover:bg-indigo-600/80 text-white px-3 py-1 rounded-full transition-all flex items-center gap-1">
            <i data-lucide="home" class="w-4 h-4"></i>
            <span class="text-xs">Home</span>
        </a>
    </div>

    <script>
        lucide.createIcons();
        const canvas = document.getElementById('animationCanvas');
        const ctx = canvas.getContext('2d');
        const textOverlay = document.getElementById('textOverlay');
        const captionBox = document.getElementById('captionBox');
        const replayBtn = document.getElementById('replayBtn');
        const hookOverlay = document.getElementById('hookOverlay');
        const branding = document.getElementById('branding');
        const ctaFollow = document.getElementById('ctaFollow');
        const ctaSave = document.getElementById('ctaSave');

        var w, h;
        
        function setCanvasSize() {
            const parent = canvas.parentElement;
            canvas.width = parent.clientWidth;
            canvas.height = parent.clientHeight;
            w = canvas.width;
            h = canvas.height;
        }

        const wait = (ms) => new Promise(res => setTimeout(res, ms));

        // VIRAL OPTIMIZATION: Dual text display - main message + caption
        async function showText(message, caption = '', duration = 2000) {
            textOverlay.innerHTML = message;
            textOverlay.classList.add('visible');
            
            if (caption) {
                captionBox.innerHTML = caption;
                captionBox.classList.add('visible');
            }
            
            await wait(duration);
            textOverlay.classList.remove('visible');
            captionBox.classList.remove('visible');
            await wait(300);
        }

        function drawShape(points, color) {
            ctx.beginPath();
            ctx.moveTo(points[0].x, points[0].y);
            for (let i = 1; i < points.length; i++) {
                ctx.lineTo(points[i].x, points[i].y);
            }
            ctx.closePath();
            ctx.strokeStyle = color;
            ctx.lineWidth = 5;
            ctx.stroke();
        }
        
        // VIRAL OPTIMIZATION: Faster animations (750ms instead of 1000ms)
        async function animateShape(fromPoints, toPoints, color, duration = 750) {
            let start = null;
            return new Promise(resolve => {
                function draw(timestamp) {
                    if(!start) start = timestamp;
                    const progress = Math.min((timestamp - start) / duration, 1);
                    ctx.clearRect(0, 0, w, h);
                    const currentPoints = fromPoints.map((p, i) => {
                        const dx = toPoints[i].x - p.x;
                        const dy = toPoints[i].y - p.y;
                        return { x: p.x + dx * progress, y: p.y + dy * progress };
                    });
                    drawShape(currentPoints, color);
                    if(progress < 1) requestAnimationFrame(draw);
                    else resolve();
                }
                requestAnimationFrame(draw);
            });
        }

        async function playAnimation() {
            // Reset all elements
            replayBtn.classList.remove('visible');
            ctaFollow.classList.remove('visible');
            ctaSave.classList.remove('visible');
            branding.classList.remove('visible');
            hookOverlay.classList.remove('hidden');
            ctx.clearRect(0, 0, w, h);

            // VIRAL HOOK: 3-second attention grabber
            await wait(2500);
            hookOverlay.classList.add('hidden');
            await wait(500);

            const cx = w / 2, cy = h / 2 + 30, size = w * 0.28;
            
            // Shape definitions
            const generic = [
                {x: cx - size, y: cy - size*0.5}, 
                {x: cx + size, y: cy - size*0.8}, 
                {x: cx + size*1.2, y: cy + size*0.5}, 
                {x: cx - size*0.8, y: cy + size}
            ];
            const parallelogram = [
                {x: cx - size*1.2, y: cy - size*0.5}, 
                {x: cx + size*0.6, y: cy - size*0.5}, 
                {x: cx + size*1.2, y: cy + size*0.5}, 
                {x: cx - size*0.6, y: cy + size*0.5}
            ];
            const rectangle = [
                {x: cx - size, y: cy - size*0.6}, 
                {x: cx + size, y: cy - size*0.6}, 
                {x: cx + size, y: cy + size*0.6}, 
                {x: cx - size, y: cy + size*0.6}
            ];
            const rhombus = [
                {x: cx, y: cy - size}, 
                {x: cx + size, y: cy}, 
                {x: cx, y: cy + size}, 
                {x: cx - size, y: cy}
            ];
            const square = [
                {x: cx - size*0.7, y: cy - size*0.7}, 
                {x: cx + size*0.7, y: cy - size*0.7}, 
                {x: cx + size*0.7, y: cy + size*0.7}, 
                {x: cx - size*0.7, y: cy + size*0.7}
            ];
            
            // VIRAL OPTIMIZATION: Faster pacing, clearer captions
            await showText(
                "The <span class='handwritten'>Quadrilaterals</span><br>Shape-Shifter!", 
                "Watch how shapes transform with simple rules",
                2200
            );
            
            drawShape(generic, '#e0e1dd');
            await wait(1000);
            
            await showText(
                "Start: Basic<br>Quadrilateral", 
                "Just 4 sides. That's the only rule!",
                2800
            );
            
            await showText(
                "Add Rule #1:<br><span class='highlight'>Opposite sides parallel</span>", 
                "Now opposite sides are parallel",
                3200
            );
            await animateShape(generic, parallelogram, '#fca311');

            await showText(
                "<span class='handwritten'>Parallelogram!</span>",
                "Parallel opposite sides = Parallelogram",
                2000
            );

            // VIRAL OPTIMIZATION: Show branding at 20-second mark
            branding.classList.add('visible');

            await showText(
                "Add Rule #2:<br><span class='highlight'>All angles = 90Â°</span>", 
                "Making all angles right angles",
                3200
            );
            await animateShape(parallelogram, rectangle, '#80ed99');
            
            await showText(
                "<span class='handwritten'>Rectangle!</span>",
                "Right angles + parallel sides = Rectangle",
                2000
            );
            
            await showText(
                "Let's try a<br>different rule...", 
                "Going back to our parallelogram",
                2500
            );
            await animateShape(rectangle, parallelogram, '#fca311');

            await showText(
                "New Rule:<br><span class='highlight'>All sides equal</span>", 
                "Making all 4 sides the same length",
                3200
            );
            await animateShape(parallelogram, rhombus, '#61a5c2');

            await showText(
                "<span class='handwritten'>Rhombus!</span>",
                "Equal sides + parallel = Rhombus",
                2000
            );
            
            await showText(
                "The ULTIMATE form:<br><span class='highlight'>Right angles</span><br>+<br><span class='highlight'>Equal sides</span>", 
                "Combining both special rules",
                3500
            );
            await animateShape(rhombus, square, 'white');

            await showText(
                "<span class='handwritten'>The Mighty<br>SQUARE!</span> ðŸ”¥",
                "The perfect quadrilateral!",
                3000
            );
            
            // VIRAL OPTIMIZATION: Strategic CTAs appear
            ctaFollow.classList.add('visible');
            await wait(2000);
            ctaSave.classList.add('visible');
            await wait(2000);

            replayBtn.classList.add('visible');
        }

        window.addEventListener('resize', setCanvasSize);
        setCanvasSize();
        replayBtn.addEventListener('click', playAnimation);
        
        // Auto-start animation
        playAnimation();

    </script>
</body>
</html>
